{% extends 'base.html' %}

{% block content %}
<div class="flex justify-between h-full w-full items-start">
  <div class="flex-1 grid grid-cols-4 gap-4 px-8 py-2">
  {% for file in files %}
    <div class="flex flex-col gap-2 rounded-3xl bg-slate-50">
      <div class="px-4 py-4 flex flex-col gap-4">
        <div class="hidden">
          <a id="{{file}}-show" href="{{ url_for('pages.show', filename=file) }}" class="card-link">
            <span class="material-symbols-outlined">
              visibility
            </span>
          </a>
          <a id="{{file}}-download" href="{{ url_for('pages.download', filename=file) }}" class="card-link">
            <span class="material-symbols-outlined">
              download
            </span>
          </a>
          <a id="{{file}}-delete" href="{{ url_for('pages.delete', filename=file) }}" class="card-link text-danger">
            <span class="material-symbols-outlined">
              delete
            </span>
          </a>
        </div>
        <div class="flex justify-between">
          {% if file.endswith(('.png', '.jpg', '.jpeg', '.gif')) %}
            <img src="{{ url_for('pages.show', filename=file) }}" alt="{{ file }}" height="50" class="rounded-lg object-cover h-16 w-16">
          {% else %}
            {# Display a file icon and name #}
            <span class="material-symbols-outlined">
              description
            </span>
          {% endif %}
          <span class="material-symbols-outlined hover:cursor-pointer">
            more_vert
          </span>
        </div>
        {# Display the file name with max length of 18 characters and extension #}
        <p class="font-bold">
          {% if file|length > 18 %}
            {{ file[:10] }}...{{ file[-4:] }}
          {% else %}
            {{ file }}
          {% endif %}
        </p>
        {# Display the file upload date #}
        <p class="text-neutral-500 text-sm font-medium">{{ file|file_date }}</p>
      </div>
      <div class="bg-neutral-300 px-4 py-5 rounded-b-3xl font-bold">
        {{ file|file_size }}
      </div>
    </div>
    
  {% endfor %}
  </div>
  <div class="flex flex-col bg-slate-50 h-full lg:w-1/3 py-4 px-6 gap-4">
    <h3 id="file_title" class="text-lg font-bold">Titre</h3>
    <img id="file_content" src="" alt="">
    <div class="flex justify-center gap-3">
      <a href="{{ url_for('pages.show', filename=file) }}" class="bg-neutral-300 rounded-lg flex justify-center items-center p-2">
        <span class="material-symbols-outlined">
          visibility
        </span>
      </a>
      <a href="{{ url_for('pages.download', filename=file) }}" class="bg-neutral-300 rounded-lg flex justify-center items-center p-2">
        <span class="material-symbols-outlined">
          download
        </span>
      </a>
      <a href="{{ url_for('pages.delete', filename=file) }}" class="bg-neutral-300 rounded-lg flex justify-center items-center p-2">
        <span class="material-symbols-outlined">
          delete
        </span>
      </a>
    </div>
    <p class="text-neutral-500 text-sm font-medium flex-1">
      {# Display the file type #}
      Fichier {{ file|file_type|default('inconnu') }}
    </p>
    <div class="flex justify-between">
      <p class="text-sm">
        Taille du fichier :
      </p>
      <p class="text-sm">
        {{ file|file_size|default('inconnu') }}
      </p>
    </div>
    <div class="flex justify-between">
      <p class="text-sm">
        Date de téléversement :
      </p>
      <p class="text-sm">
        {{ file|file_date|default('inconnu') }}
      </p>
    </div>
  </div>


</div>
{% endblock content %}